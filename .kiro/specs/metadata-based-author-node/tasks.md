# Implementation Plan
flake.nixで開発環境を整備しているので、コマンドを入力する際は最初にnix develop --commandをつけくわえること。

- [x] 1. テスト用作者記事ファイルの作成
  - `author_image`フィールドを含むmarkdownファイルを作成
  - 適切なメタデータ構造でテスト用プロフィール画像を設定
  - _Requirements: 2.1, 2.2, 4.1, 4.2_

- [x] 2. メタデータ構造の拡張
  - `ArticleMetadata`と`ProcessedMetadata`に`author_image`フィールドを追加
  - メタデータ解析処理で新フィールドを適切に処理
  - _Requirements: 1.1, 1.2, 5.1, 5.3_

- [x] 3. 作者ノード検索機能の実装
  - `find_author_article`関数を実装して`author_image`フィールドを持つ記事を検索
  - 複数の作者記事がある場合は最初のものを選択するロジック
  - _Requirements: 1.1, 1.2_

- [x] 4. ノード作成ロジックの更新
  - `create_node_registry_from_articles`関数を更新してメタデータベースの作者ノード作成
  - 作者記事が見つかった場合は`NodeContent::Author`を作成
  - 作者記事が見つからない場合は従来のハードコーディング方式にフォールバック
  - _Requirements: 1.3, 1.4, 3.1, 3.3_

- [ ] 5. エラーハンドリングとログ出力の実装
  - 作者ノード検索時の適切なログ出力
  - 画像読み込み失敗時のフォールバック処理
  - 複数の作者記事が存在する場合の警告出力
  - _Requirements: 2.4, 3.3_

- [ ] 6. 単体テストの実装
  - メタデータ解析のテスト（`author_image`フィールドの処理）
  - 作者ノード検索機能のテスト（存在する場合、存在しない場合、複数存在する場合）
  - ノード作成ロジックのテスト（`NodeContent::Author`の正しい作成）
  - _Requirements: 3.4, 5.4_

- [ ] 7. 統合テストと動作確認
  - 作者ノードが正しく表示されることを確認
  - 画像が適切に読み込まれ円形表示されることを確認
  - クリック動作やドラッグ機能が正常に動作することを確認
  - _Requirements: 2.3, 3.2, 4.3, 4.4_

- [ ] 8. フォールバック機能の検証
  - `author_image`フィールドが存在しない場合の従来動作確認
  - 画像ファイルが存在しない場合のテキスト表示フォールバック確認
  - メタデータ解析エラー時の適切な処理確認
  - _Requirements: 1.3, 2.4, 3.1, 3.3_